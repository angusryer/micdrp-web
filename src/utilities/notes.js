export const frequencies = [
    { name: 'C 0', freq: 16.35 },
    { name: 'C#|Db 0', freq: 17.32 },
    { name: 'D 0', freq: 18.35 },
    { name: 'D#|Eb 0', freq: 19.45 },
    { name: 'E 0', freq: 20.60 },
    { name: 'F 0', freq: 21.83 },
    { name: 'F#|Gb 0', freq: 23.12 },
    { name: 'G 0', freq: 24.50 },
    { name: 'G#|Ab 0', freq: 25.96 },
    { name: 'A 0', freq: 27.50 },
    { name: 'A#|Bb 0', freq: 29.14 },
    { name: 'B 0', freq: 30.87 },
    { name: 'C 1', freq: 32.70 },
    { name: 'C#|Db 1', freq: 34.65 },
    { name: 'D 1', freq: 36.71 },
    { name: 'D#|Eb 1', freq: 38.89 },
    { name: 'E 1', freq: 41.20 },
    { name: 'F 1', freq: 43.65 },
    { name: 'F#|Gb 1', freq: 46.25 },
    { name: 'G 1', freq: 49.00 },
    { name: 'G#|Ab 1', freq: 51.91 },
    { name: 'A 1', freq: 55.00 },
    { name: 'A#|Bb 1', freq: 58.27 },
    { name: 'B 1', freq: 61.74 },
    { name: 'C 2', freq: 65.41 },
    { name: 'C#|Db 2', freq: 69.30 },
    { name: 'D 2', freq: 73.42 },
    { name: 'D#|Eb 2', freq: 77.78 },
    { name: 'E 2', freq: 82.41 },
    { name: 'F 2', freq: 87.31 },
    { name: 'F#|Gb 2', freq: 92.50 },
    { name: 'G 2', freq: 98.00 },
    { name: 'G#|Ab 2', freq: 103.83 },
    { name: 'A 2', freq: 110.00 },
    { name: 'A#|Bb 2', freq: 116.54, },
    { name: 'B 2', freq: 123.47 },
    { name: 'C 3', freq: 130.81 },
    { name: 'C#|Db 3', freq: 138.59 },
    { name: 'D 3', freq: 146.83 },
    { name: 'D#|Eb 3', freq: 155.56 },
    { name: 'E 3', freq: 164.81 },
    { name: 'F 3', freq: 174.61 },
    { name: 'F#|Gb 3', freq: 185.00 },
    { name: 'G 3', freq: 196.00 },
    { name: 'G#|Ab 3', freq: 207.65 },
    { name: 'A 3', freq: 220.00 },
    { name: 'A#|Bb 3', freq: 233.08 },
    { name: 'B 3', freq: 246.94 },
    { name: 'C 4', freq: 261.63 },
    { name: 'C#|Db 4', freq: 277.18 },
    { name: 'D 4', freq: 293.66 },
    { name: 'D#|Eb 4', freq: 311.13 },
    { name: 'E 4', freq: 329.63 },
    { name: 'F 4', freq: 349.23 },
    { name: 'F#|Gb 4', freq: 369.99 },
    { name: 'G 4', freq: 392.00 },
    { name: 'G#|Ab 4', freq: 415.30 },
    { name: 'A 4', freq: 440.00 },
    { name: 'A#|Bb 4', freq: 466.16 },
    { name: 'B 4', freq: 493.88 },
    { name: 'C 5', freq: 523.25 },
    { name: 'C#|Db 5', freq: 554.37 },
    { name: 'D 5', freq: 587.33 },
    { name: 'D#|Eb 5', freq: 622.25 },
    { name: 'E 5', freq: 659.25 },
    { name: 'F 5', freq: 698.46 },
    { name: 'F#|Gb 5', freq: 739.99 },
    { name: 'G 5', freq: 783.99 },
    { name: 'G#|Ab 5', freq: 830.61 },
    { name: 'A 5', freq: 880.00 },
    { name: 'A#|Bb 5', freq: 932.33 },
    { name: 'B 5', freq: 987.77 },
    { name: 'C 6', freq: 1046.50 },
    { name: 'C#|Db 6', freq: 1108.73 },
    { name: 'D 6', freq: 1174.66 },
    { name: 'D#|Eb 6', freq: 1244.51 },
    { name: 'E 6', freq: 1318.51 },
    { name: 'F 6', freq: 1396.91 },
    { name: 'F#|Gb 6', freq: 1479.98 },
    { name: 'G 6', freq: 1567.98 },
    { name: 'G#|Ab 6', freq: 1661.22 },
    { name: 'A 6', freq: 1760.00 },
    { name: 'A#|Bb 6', freq: 1864.66 },
    { name: 'B 6', freq: 1975.53 },
    { name: 'C 7', freq: 2093.00 },
    { name: 'C#|Db 7', freq: 2217.46 },
    { name: 'D 7', freq: 2349.32 },
    { name: 'D#|Eb 7', freq: 2489.02 },
    { name: 'E 7', freq: 2637.02 },
    { name: 'F 7', freq: 2793.83 },
    { name: 'F#|Gb 7', freq: 2959.96 },
    { name: 'G 7', freq: 3135.96 },
    { name: 'G#|Ab 7', freq: 3322.44 },
    { name: 'A 7', freq: 3520.00 },
    { name: 'A#|Bb 7', freq: 3729.31 },
    { name: 'B 7', freq: 3951.07 },
    { name: 'C 8', freq: 4186.01 },
    { name: 'C#|Db 8', freq: 4434.92 },
    { name: 'D 8', freq: 4698.63 },
    { name: 'D#|Eb 8', freq: 4978.03 },
    { name: 'E 8', freq: 5274.04 },
    { name: 'F 8', freq: 5587.65 },
    { name: 'F#|Gb 8', freq: 5919.91 },
    { name: 'G 8', freq: 6271.93 },
    { name: 'G#|Ab 8', freq: 6644.88 },
    { name: 'A 8', freq: 7040.00 },
    { name: 'A#|Bb 8', freq: 7458.62 },
    { name: 'B 8', freq: 7902.13 }
]

export const getNoteNameFromFrequency = (freq) => {
    const closest = frequencies.reduce((prev, curr) => {
        return Math.abs(curr.freq - freq) < Math.abs(prev.freq - freq) ? curr : prev;
    })
    return closest.name;
};

export const getFrequencyFromNoteName = (noteName) => {
    return frequencies.filter( arrayNote => (arrayNote.name === noteName) )[0].freq;
};

export const getRelativeNote = (step, reference) => {
    if (typeof(reference) === "string") {
        const referenceIndex = frequencies.findIndex(arrayNote => (arrayNote.name === reference))
        if (referenceIndex + step > frequencies.length) {
            return frequencies[frequencies.length - 1];
        } else {
            return frequencies[(referenceIndex + step >= 0) ? referenceIndex + step : 0];
        }
    } else if (typeof(reference) === "number" ) {
        const referenceIndex = frequencies.findIndex(arrayNote => (arrayNote.freq === reference))
        if ( referenceIndex + step > frequencies.length) {
            return frequencies[frequencies.length - 1];
        } else {
            return frequencies[(referenceIndex + step >= 0) ? referenceIndex + step : 0];
        }
    } else {
        return 0;
    }
}

export const getLinearPitchAsPercentage = (frequency) => {
    return (39.86 * Math.log10(frequency / 440) + 49) / (39.86 * Math.log10(frequencies[frequencies.length - 1].freq / 440) + 49)
}

